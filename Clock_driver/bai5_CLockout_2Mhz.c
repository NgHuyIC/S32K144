/**
 * @file    bai5_CLockout_2Mhz.c
 * @brief   Configures the CLKOUT to output a 2 MHz clock signal.
 * @details This file contains a function to configure the CLKOUT pin to output a 2 MHz clock signal 
 *          using the System OSC (SOSC_CLK). The function sets the appropriate dividers and clock source
 *          to achieve this frequency.
 */

/*==================================================================================================
 *                                        INCLUDE FILES
==================================================================================================*/
#include "SCG_Registers.h"
#include "Clock.h"

/*==================================================================================================
 *                          LOCAL TYPEDEFS (STRUCTURES, UNIONS, ENUMS)
==================================================================================================*/

/*==================================================================================================
 *                                       LOCAL MACROS
==================================================================================================*/

/*==================================================================================================
 *                                      LOCAL CONSTANTS
==================================================================================================*/

/*==================================================================================================
 *                                      LOCAL VARIABLES
==================================================================================================*/

/*==================================================================================================
 *                                      GLOBAL CONSTANTS
==================================================================================================*/

/*==================================================================================================
 *                                      GLOBAL VARIABLES
==================================================================================================*/

/*==================================================================================================
 *                                   LOCAL FUNCTION PROTOTYPES
==================================================================================================*/

/*==================================================================================================
 *                                       LOCAL FUNCTIONS
==================================================================================================*/

/*==================================================================================================
 *                                       GLOBAL FUNCTIONS
==================================================================================================*/
/**
 * @brief   Configures the CLKOUT pin to output a 2 MHz clock signal.
 * @details This function sets up the CLKOUT pin to output a 2 MHz clock signal by selecting the System 
 *          OSC (SOSC_CLK) as the clock source and configuring the SOSC divider to divide by 4. This 
 *          results in a clock frequency of 2 MHz (8 MHz / 4).
 *
 * @return  void
 */
void configure_CLKOUT(void) {
    /* Configure CLKOUT to use the System OSC (SOSC_CLK) */
    SCG->CLKOUTCNFG = 0x01000000;
    /*
     * CLKOUTSEL = 0001: Select System OSC (SOSC_CLK) as the CLKOUT source
     */

    /* Configure the SOSC divider to divide by 4 */
    SCG->SOSCDIV = 0x00000003;
    /*
     * SOSCDIV1 = 0000: Divide by 1
     * SOSCDIV2 = 0011: Divide by 4
     * Resulting frequency = 8 MHz / 4 = 2 MHz
     */
}
